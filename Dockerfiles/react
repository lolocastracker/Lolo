FROM node:14
# copy the files from current directory
COPY ./react/*.json ./
#Base React Packages
RUN npm install --silent
RUN npm install react-scripts -g --silent
RUN npm install semantic-ui-react --silent
RUN npm install react-router-dom --silent
#Map
RUN npm install leaflet

# old version required, otherwise importing components fails
RUN npm install react-leaflet@">=3.1.0 <3.2.0 || ^3.2.1"

# this must also be installed or importing components fail
RUN npm install @react-leaflet/core@">=1.0.0 <1.1.0 || ^1.1.1"

# not sure if needed (for typescript)
# RUN npm install -D @types/leaflet
#Auth
RUN npm install --save @react-keycloak/web
RUN npm install --save keycloak-js
ENV NODE_PATH /.
